---
layout: post
title: Add Cucumber Features
---
After thinking about the [requirements]({% post_url 2016-05-04-requirements %}), it time to create the Cucumber feature files. And add them to the project.

To make it possible to run these [Specification by Example]()s,   


## Action Plan

- Add the required Cucumber dependencies.

{% highlight plain text %}
        <dependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-java</artifactId>
            <version>1.2.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>info.cukes</groupId>
            <artifactId>cucumber-junit</artifactId>
            <version>1.2.0</version>
            <scope>test</scope>
        </dependency>
{% endhighlight %}

- Create directories for the Cucumber feature files and Cucumber step classes.

- Create directory for Cucumber step classes  
  `mkdir  src/it/java`
- Create directory for Cucumber feature file  
  `mkdir  src/it/resources`

- Add the new directories as Eclipse source Folders  
  Select both directories `java` and `resources` and use the mouse menu: _Build Path > Use as Source Folder_ 

- Add [Maven failsafe plug-in](http://maven.apache.org/surefire/maven-failsafe-plugin/) to the Maven Project Configuration `pom.xml`  
  __WARNING__ The Maven failsafe plug-in is a general _Integration Test_ plug-in, by default is scans for [test classes with specific patterns](http://maven.apache.org/surefire/maven-failsafe-plugin/examples/inclusion-exclusion.html). The class `RunCucumberTests` does _NOT_ fall in the pattern, so configuration is required. The Java test classes are not in a default Maven test classes directory `src/test/java`, so configration is needed.

{% highlight plain text %}
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <version>2.19.1</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>integration-test</goal>
                            <goal>verify</goal>
                        </goals>
                    </execution>
                    <configuration>
                        <includes>
                            <include>*RunCucumberTests.java</include>
                        </includes>
                        <testSourceDirectory>src/it/java</testSourceDirectory>
                    </configuration>
                </executions>
            </plugin>
{% endhighlight %}


- Create a Java package with a name similar as the package name in `src/main/java`.  
  The top level package name for the project is `com.github.<github-user>.mrrs`.  
  Create a new package name in `src/it/java` for the integration tests `com.github.<github-user>.mrrs.it`.  
  Inside this Java package the _Integration Test_ related classes will be added.
 
- Create a new class, in the package `com.github.<github-user>.mrrs.it`, that will run Cucumber feature files.
  Give this class a clear name like `RunCucumberTests`.

{% highlight java %}
import org.junit.runner.RunWith;

import cucumber.api.CucumberOptions;
import cucumber.api.junit.Cucumber;

@RunWith(Cucumber.class)
@CucumberOptions(
        plugin = { "html:target/cucumber/report.html", "json:target/cucumber-report.json" }, 
        features = { "src/it/resources/" })
public class RunCucumberTests {
    // No implementation required
}
{% endhighlight %}


## Install Cucumber for Eclipse feature

  Use the Eclipse update site: `http://cucumber.github.com/cucumber-eclipse/update-site`


## Create New Feature File

- Create the Cucumber feature file `room.feature`, in the directory `src/it/resources` for the room features.

{% highlight plain text %}
Feature: Rooms require a location and capacity. Optional they have a name and facilities.


Scenario: Room can be found by location
Given a room with name "Berlin", location "1.12" and capacity 12 
    And which has facility "whiteboard"
When searching for room with location "1.12"
Then the room with name "Berlin" should be returned
{% endhighlight %}

- Create a new class `RoomSteps` place it in the package `com.github.<github-user>.mrrs.it.cucumber`.  
  This class will be used to place the __Given__, __Then__ and __When__ methods in, generated by Cucumber, based on the feature file. 

{% highlight java %}
public class RoomSteps {

}
{% endhighlight %}


## Check the Set Up

### Run Cucumber through Eclipse Cucumber

- Open the file `room.feature`.
- Use the right mouse button in the file editor, or on the file `room.feature`, in the view _Project Explorer_ / _Package Explorer_.
  Use the menu: _Run As > Cucumber Feature_  
  This will show in the view _Console_, which Cucumber steps are still needed to be implemented.  
  
  [![Eclipse Run Cucumber Examples]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-00-tn.jpeg)]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-00.jpeg)
[![Eclipse Run Cucumber Examples]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-01-tn.jpeg)]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-01.jpeg)
[![Eclipse Run Cucumber Examples]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-02-tn.jpeg)]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-02.jpeg)


### Run Cucumber through Eclipse JUnit

__TIP__ To just only run the Cucumber Examples, select the `RunCucumberTests` class, from the view _Package Explorer_ or _Project Explorer_ and the use context menu: _Run As -> JUnit Test_
![Eclipse Run Cucumber Examples as JUnit]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-junit-10.jpeg)
![Eclipse Run Cucumber Examples as JUnit]({{ site.url }}/images/eclipse/eclipse-run-cucumber-examples-junit-11.jpeg)


### Run Cucumber through Eclipse Maven


